---
title: "Fase 3: Ejecutar"
---

import { Callout } from 'nextra/components'
import RalphAccessGate from '../../components/RalphAccessGate'

# LecciÃ³n 3.6: Fase 3 - Ejecutar

<RalphAccessGate>

## El Momento de la Verdad

Tienes specs claras y un plan detallado. Es hora de **lanzar Ralph**.

---

## El Script de Loop

Guarda este script como `loop.sh` en la raÃ­z de tu proyecto:

```bash
#!/bin/bash

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                    RALPH LOOP v1.0
#         Claude Code en Piloto AutomÃ¡tico
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Colores para output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Contador de iteraciones
ITERATION=1

# Archivo de log
LOG_FILE="ralph_log_$(date +%Y%m%d_%H%M%S).txt"

echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}        ğŸ¤– RALPH LOOP INICIADO${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""
echo -e "ğŸ“ Proyecto: $(pwd)"
echo -e "ğŸ“ Log: $LOG_FILE"
echo -e "â° Inicio: $(date)"
echo ""
echo -e "${YELLOW}Presiona Ctrl+C para detener${NC}"
echo ""

# Guardar inicio en log
echo "=== RALPH LOOP INICIADO ===" >> $LOG_FILE
echo "Directorio: $(pwd)" >> $LOG_FILE
echo "Inicio: $(date)" >> $LOG_FILE
echo "" >> $LOG_FILE

while true; do
    echo -e "${GREEN}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${NC}"
    echo -e "${GREEN}  ğŸ“ ITERACIÃ“N #$ITERATION${NC}"
    echo -e "${GREEN}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${NC}"
    echo -e "â° $(date)"
    echo ""

    # Guardar en log
    echo "--- IteraciÃ³n #$ITERATION - $(date) ---" >> $LOG_FILE

    # Mostrar estado actual del PLAN.md
    if [ -f "PLAN.md" ]; then
        COMPLETADAS=$(grep -c "\[x\]" PLAN.md 2>/dev/null || echo "0")
        PENDIENTES=$(grep -c "\[ \]" PLAN.md 2>/dev/null || echo "0")
        echo -e "ğŸ“Š Estado: ${GREEN}$COMPLETADAS completadas${NC}, ${YELLOW}$PENDIENTES pendientes${NC}"
        echo ""
    fi

    # Ejecutar Claude
    echo -e "${BLUE}ğŸš€ Lanzando Claude...${NC}"
    echo ""

    # El comando principal
    claude -p "$(cat PROMPT_build.md)" 2>&1 | tee -a $LOG_FILE

    EXIT_CODE=$?

    echo ""

    # Verificar resultado
    if [ $EXIT_CODE -eq 0 ]; then
        echo -e "${GREEN}âœ… IteraciÃ³n #$ITERATION completada${NC}"
    else
        echo -e "${RED}âš ï¸ IteraciÃ³n #$ITERATION terminÃ³ con cÃ³digo: $EXIT_CODE${NC}"
    fi

    # Incrementar contador
    ITERATION=$((ITERATION + 1))

    # Pausa antes de siguiente iteraciÃ³n
    echo ""
    echo -e "${YELLOW}â³ Siguiente iteraciÃ³n en 10 segundos...${NC}"
    echo -e "${YELLOW}   (Ctrl+C para detener)${NC}"
    sleep 10
done
```

---

## Permisos y EjecuciÃ³n

```bash
# Dar permisos de ejecuciÃ³n
chmod +x loop.sh

# Ejecutar Ralph
./loop.sh
```

---

## Monitoreo en Tiempo Real

### Terminal dividida

Usa `tmux` o divide tu terminal:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          RALPH LOOP                 â”‚
â”‚  (ejecutando claude)                â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  $ tail -f ralph_log_*.txt          â”‚
â”‚  (log en tiempo real)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Comandos Ãºtiles mientras Ralph trabaja

```bash
# Ver progreso del plan
cat PLAN.md | grep -E "\[.\]"

# Ver Ãºltimos cambios en archivos
ls -lt src/ | head -10

# Ver aprendizajes acumulados
cat PROGRESS.md

# Ver log en tiempo real
tail -f ralph_log_*.txt
```

---

## CuÃ¡ndo Intervenir

<div className="my-6 space-y-4">
  <div className="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-500">
    <h4 className="font-bold text-green-600 dark:text-green-400">âœ… Dejar que continÃºe</h4>
    <ul className="text-sm text-slate-600 dark:text-gray-400 mt-2">
      <li>â€¢ Las tareas se completan correctamente</li>
      <li>â€¢ Los tests pasan</li>
      <li>â€¢ PROGRESS.md se actualiza con informaciÃ³n Ãºtil</li>
    </ul>
  </div>

  <div className="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border-l-4 border-yellow-500">
    <h4 className="font-bold text-yellow-600 dark:text-yellow-400">âš ï¸ Revisar pero no detener</h4>
    <ul className="text-sm text-slate-600 dark:text-gray-400 mt-2">
      <li>â€¢ Una tarea tarda mÃ¡s de lo esperado</li>
      <li>â€¢ Claude aÃ±ade notas en PROGRESS.md</li>
      <li>â€¢ Hay warnings pero no errores</li>
    </ul>
  </div>

  <div className="p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border-l-4 border-red-500">
    <h4 className="font-bold text-red-600 dark:text-red-400">ğŸ›‘ Detener e intervenir</h4>
    <ul className="text-sm text-slate-600 dark:text-gray-400 mt-2">
      <li>â€¢ La misma tarea falla mÃºltiples veces</li>
      <li>â€¢ Claude pide clarificaciÃ³n que no puede obtener</li>
      <li>â€¢ Los tests fallan repetidamente</li>
      <li>â€¢ Se detecta un error en las specs</li>
    </ul>
  </div>
</div>

---

## IntervenciÃ³n Suave

Si necesitas corregir algo sin detener Ralph:

1. **Edita PROGRESS.md** - AÃ±ade una nota que Claude leerÃ¡
2. **Edita PLAN.md** - Reordena o clarifica tareas
3. **No toques PROMPT_build.md** durante ejecuciÃ³n

```markdown
# PROGRESS.md

## âš ï¸ NOTA DEL OPERADOR (2024-01-15 15:30)
No usar console.log, usar el logger configurado en /src/utils/logger.ts
```

Claude leerÃ¡ esta nota en la siguiente iteraciÃ³n.

---

## IntervenciÃ³n Fuerte

Si necesitas detener Ralph:

```bash
# Presiona Ctrl+C

# O desde otra terminal:
pkill -f "loop.sh"
```

DespuÃ©s de corregir el problema:

```bash
# Reiniciar
./loop.sh
```

---

## MÃ©tricas de Ã‰xito

Al final de una sesiÃ³n de Ralph, evalÃºa:

| MÃ©trica | Objetivo | Tu resultado |
|---------|----------|--------------|
| Tareas completadas | 80%+ del plan | ? |
| Tests pasando | 100% | ? |
| Intervenciones necesarias | < 3 | ? |
| Tiempo total | SegÃºn estimaciÃ³n | ? |

---

## Troubleshooting ComÃºn

<details className="my-4 p-4 bg-slate-100 dark:bg-gray-800/50 rounded-lg">
  <summary className="font-semibold cursor-pointer">Claude repite la misma tarea</summary>
  <p className="mt-3 text-slate-600 dark:text-gray-400">
    Verifica que PLAN.md se estÃ¡ actualizando correctamente. Puede que Claude no tenga permisos
    de escritura o que el formato de checkbox sea incorrecto.
  </p>
</details>

<details className="my-4 p-4 bg-slate-100 dark:bg-gray-800/50 rounded-lg">
  <summary className="font-semibold cursor-pointer">Las iteraciones son muy cortas</summary>
  <p className="mt-3 text-slate-600 dark:text-gray-400">
    Las tareas pueden ser demasiado simples. AgrÃºpalas o hazlas mÃ¡s sustanciales.
  </p>
</details>

<details className="my-4 p-4 bg-slate-100 dark:bg-gray-800/50 rounded-lg">
  <summary className="font-semibold cursor-pointer">Claude pide informaciÃ³n que no tiene</summary>
  <p className="mt-3 text-slate-600 dark:text-gray-400">
    Tus specs no son suficientemente detalladas. DetÃ©n, mejora PROMPT_build.md, y reinicia.
  </p>
</details>

---

<div className="mt-8 text-center">
  <a href="/ralph/proyecto-practico" className="inline-block px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
    Siguiente: Proyecto PrÃ¡ctico â†’
  </a>
</div>

</RalphAccessGate>
